DeepPCB：一个数据集包含1500个图像对，每个图像对由一个无缺陷模板图像和一个带注释的对齐测试图像组成，其中包括6种最常见的PCB缺陷的位置：开路、短路、鼠标线、毛刺、针孔和假铜。



数据集描述

图像采集

该数据集中的所有图像都是从线扫描CCD获得的，分辨率约为每毫米48像素。以上述方式从采样图像中手动检查和清除无缺陷模板图像。模板和测试图像的原始大小约为16k x 16k像素。然后通过模板匹配技术将它们裁剪成640x640大小的子图像并对齐。然后，仔细选择阈值进行二值化以避免光照干扰。需要注意的是，根据PCB缺陷检测算法的不同，预处理算法也会有所不同，然而，图像配准和阈值化技术是高精度PCB缺陷定位和分类的常用方法。下图显示了DeepPCB数据集中的一个示例对，其中右一个是无缺陷模板图像，左一个是带有地面真值注释的缺陷测试图像。




测试图像的一个例子是对应的模板图像

图像注释

对于测试图像中的每个缺陷，我们使用具有类ID的轴对齐边界框。如上图所示，我们对六种常见的PCB缺陷进行了注释：开路、短路、鼠尾、杂散、针孔和杂散铜。由于实际测试图像中只有少量的缺陷，因此我们根据PCB的缺陷模式在每个测试图像上人工论证了一些人工缺陷，导致每个640x640图像中约有3到12个缺陷。PCB缺陷数量如下图所示。我们分离了1000张图像作为训练集，剩下的图像作为测试集。



每个带注释的图像都拥有一个具有相同文件名的注释文件，例如00041000_测试.jpg, 00041000_温度jpg和00041000.txt是测试图像、模板图像和相应的注释文件。测试图像上的每个缺陷都被标注为格式：x1，y1，x2，y2，类型，其中（x1，y1）和（x2，y2）是缺陷边界框的左上角和右下角。类型是匹配项后面的整数ID:0-背景（未使用）、1-开放、2-短、3-鼠标位、4-短、5-铜、6-针孔。




注释工具现在可以与./tools目录中的源代码一起使用。



基准

采用平均准确率和F值进行评价。只有当检测到的边界盒和任何具有相同类别的地面真值盒之间的单位（IoU）的交集大于0.33时，检测才是正确的。F-score的计算公式为：F-score=2PR/（P+R），其中P和R是准确率和召回率。请注意，F-score是阈值敏感的，这意味着您可以调整您的分数阈值以获得更好的结果。虽然F-score不如mAP标准公平，但是更实用，因为在部署模型时应该始终给出一个阈值，并且并非所有算法都对目标进行了分数评估。因此，F-score和mAP都在基准中考虑。



mAP和F-score的评估脚本是从Icdar2015评估脚本中借来的，只需稍加修改（您可以先注册一个帐户）。这里，我们给出修改后的评估脚本和基本事实gt.拉链evaluation/目录中测试集的文件。您可以按照以下说明评估自己的方法：



运行您的算法并将每个图像的检测结果保存为image_名称.txt，其中图像名称应与gt.拉链. 你应该遵循评估的格式/gt.拉链除了算法中每个缺陷的输出描述应该是：x1，y1，x2，y2，confidence，type，其中（x1，y1）和（x2，y2）是缺陷边界框的左上角和右下角。置信度是一个浮点数，表示您对此类检测结果的置信度。类型是字符串，应该是以下类型之一：open、short、mousebite、spur、copper、pin hole。注意除了逗号没有空格。

将.txt文件压缩到资源.zip. （目录中不应包含任何子目录。）资源.zip文件）

运行求值脚本：python脚本.py-s码=资源.zip-克=gt.拉链

接近

本节附有源代码，将在接受论文后公开。



实验结果

这里我们展示了基于深度神经网络的模型的一些结果。我们的模型实现了98.6%的mAp，98.2%的F-score@62FPS。更多的统计分析将在论文通过后公布。绿色边界框是PCB缺陷的预测位置，每个缺陷的顶部都有置信度。
PCB-DataSets
